{"version":3,"sources":["../../src/service/DisbursementHttpService.js"],"names":["DisbursementHttpService","constructor","createDisbursementResponseService","CreateDisbursementResponseService","disbursementHttpRepository","DisbursementHttpRepository","updateDisbursementService","UpdateDisbursementService","sendOneDisbursement","user","balance","disbursementId","remark","payload","Object","DisbursementPayload","ATTRIBUTE_ACCOUNT_NUMBER","User","ATTRIBUTE_BANK_CODE","ATTRIBUTE_AMOUNT","Balance","ATTRIBUTE_REMARK","result","sendDisbursement","transactionId","DisbursementResponse","ATTRIBUTE_DATA","ATTRIBUTE_ID","status","ATTRIBUTE_RESPONSE_STATUS","disbursementUpdatedField","Disbursement","ATTRIBUTE_TRANSACTION_ID","ATTRIBUTE_STATUS","updateOne","createOne","getDisbursementStatusById","getDisbursementStatus"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEe,MAAMA,uBAAN,CAA8B;AAC3CC,EAAAA,WAAW,GAAG;AACZ,SAAKC,iCAAL,GAAyC,IAAIC,0CAAJ,EAAzC;AACA,SAAKC,0BAAL,GAAkC,IAAIC,mCAAJ,EAAlC;AACA,SAAKC,yBAAL,GAAiC,IAAIC,kCAAJ,EAAjC;AACD;;AAEwB,QAAnBC,mBAAmB,CAACC,IAAD,EAAOC,OAAP,EAAgBC,cAAhB,EAAgCC,MAAhC,EAAwC;AAC/D,UAAMC,OAAO,GAAGC,MAAM,EAAtB;AAEAD,IAAAA,OAAO,CAACE,6BAAoBC,wBAArB,CAAP,GACEP,IAAI,CAACQ,cAAKD,wBAAN,CADN;AAEAH,IAAAA,OAAO,CAACE,6BAAoBG,mBAArB,CAAP,GACET,IAAI,CAACQ,cAAKC,mBAAN,CADN;AAEAL,IAAAA,OAAO,CAACE,6BAAoBI,gBAArB,CAAP,GACET,OAAO,CAACU,iBAAQD,gBAAT,CADT;AAEAN,IAAAA,OAAO,CAACE,6BAAoBM,gBAArB,CAAP,GAAgDT,MAAhD;AAEA,UAAMU,MAAM,GAAG,MAAM,KAAKlB,0BAAL,CAAgCmB,gBAAhC,CACnBV,OADmB,CAArB;AAGA,UAAMW,aAAa,GACjBF,MAAM,CAACG,8BAAqBC,cAAtB,CAAN,CACED,8BAAqBE,YADvB,CADF;AAIA,UAAMC,MAAM,GACVN,MAAM,CAACG,8BAAqBC,cAAtB,CAAN,CACED,8BAAqBI,yBADvB,CADF;AAKA,UAAMC,wBAAwB,GAAGhB,MAAM,EAAvC;AACAgB,IAAAA,wBAAwB,CACtBC,sBAAaC,wBADS,CAAxB,GAEIR,aAFJ;AAGAM,IAAAA,wBAAwB,CAACC,sBAAaE,gBAAd,CAAxB,GAA0DL,MAA1D;AAEA,SAAKtB,yBAAL,CAA+B4B,SAA/B,CACEvB,cADF,EAEEmB,wBAFF;AAKA,SAAK5B,iCAAL,CAAuCiC,SAAvC,CACEb,MAAM,CAACG,8BAAqBC,cAAtB,CADR;AAIA,WAAOJ,MAAP;AACD;;AAE8B,QAAzBc,yBAAyB,CAACzB,cAAD,EAAiB;AAC9C,UAAMW,MAAM,GAAG,KAAKlB,0BAAL,CAAgCiC,qBAAhC,CACb1B,cADa,CAAf;AAIA,WAAOW,MAAP;AACD;;AAtD0C","sourcesContent":["import Balance from \"~src/const/Balance\";\nimport Disbursement from \"~src/const/Disbursement\";\nimport DisbursementHttpRepository from \"~src/repository/DisbursementHttpRepository\";\nimport DisbursementPayload from \"~src/const/DisbursementPayload\";\nimport DisbursementResponse from \"~src/const/DisbursementResponse\";\nimport UpdateDisbursementService from \"~src/service/UpdateDisbursementService\";\nimport CreateDisbursementResponseService from \"~src/service/CreateDisbursementResponseService\";\nimport User from \"~src/const/User\";\n\nexport default class DisbursementHttpService {\n  constructor() {\n    this.createDisbursementResponseService = new CreateDisbursementResponseService();\n    this.disbursementHttpRepository = new DisbursementHttpRepository();\n    this.updateDisbursementService = new UpdateDisbursementService();\n  }\n\n  async sendOneDisbursement(user, balance, disbursementId, remark) {\n    const payload = Object();\n\n    payload[DisbursementPayload.ATTRIBUTE_ACCOUNT_NUMBER] =\n      user[User.ATTRIBUTE_ACCOUNT_NUMBER];\n    payload[DisbursementPayload.ATTRIBUTE_BANK_CODE] =\n      user[User.ATTRIBUTE_BANK_CODE];\n    payload[DisbursementPayload.ATTRIBUTE_AMOUNT] =\n      balance[Balance.ATTRIBUTE_AMOUNT];\n    payload[DisbursementPayload.ATTRIBUTE_REMARK] = remark;\n\n    const result = await this.disbursementHttpRepository.sendDisbursement(\n      payload\n    );\n    const transactionId =\n      result[DisbursementResponse.ATTRIBUTE_DATA][\n        DisbursementResponse.ATTRIBUTE_ID\n      ];\n    const status =\n      result[DisbursementResponse.ATTRIBUTE_DATA][\n        DisbursementResponse.ATTRIBUTE_RESPONSE_STATUS\n      ];\n\n    const disbursementUpdatedField = Object();\n    disbursementUpdatedField[\n      Disbursement.ATTRIBUTE_TRANSACTION_ID\n    ] = transactionId;\n    disbursementUpdatedField[Disbursement.ATTRIBUTE_STATUS] = status;\n\n    this.updateDisbursementService.updateOne(\n      disbursementId,\n      disbursementUpdatedField\n    );\n\n    this.createDisbursementResponseService.createOne(\n      result[DisbursementResponse.ATTRIBUTE_DATA]\n    );\n\n    return result;\n  }\n\n  async getDisbursementStatusById(disbursementId) {\n    const result = this.disbursementHttpRepository.getDisbursementStatus(\n      disbursementId\n    );\n\n    return result;\n  }\n}\n"],"file":"DisbursementHttpService.js"}