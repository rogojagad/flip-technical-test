{"version":3,"sources":["../src/index.js"],"names":["app","disbursementController","DisbursementController","port","process","env","PORT","responseFactory","ResponseFactory","userController","UserController","authController","AuthController","disbursementResponseController","DisbursementResponseController","use","bodyParser","urlencoded","extended","json","genid","_","secret","SESSION_SECRET","resave","saveUninitialized","disable","get","res","responseOk","readAll","post","req","login","body","isAuthenticated","userId","params","readOneByUserId","readManyByUserId","createOne","responseNotFound","listen","err","console","error","log"],"mappings":"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","sourcesContent":["import \"dotenv/config\";\nimport AuthController from \"~src/controller/AuthController\";\nimport bodyParser from \"body-parser\";\nimport DisbursementController from \"~src/controller/DisbursementController\";\nimport DisbursementResponseController from \"~src/controller/DisbursementResponseController\";\nimport express from \"express\";\nimport ResponseFactory from \"~src/factory/ResponseFactory\";\nimport session from \"express-session\";\nimport UserController from \"~src/controller/UserController\";\nimport { v4 as uuid } from \"uuid\";\nimport { isAuthenticated } from \"~src/middleware/IsAuthenticated\";\n\nconst app = express();\nconst disbursementController = new DisbursementController();\nconst port = process.env.PORT || 5000;\nconst responseFactory = new ResponseFactory();\nconst userController = new UserController();\nconst authController = new AuthController();\nconst disbursementResponseController = new DisbursementResponseController();\n\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\napp.use(\n  session({\n    genid: (_) => {\n      return uuid();\n    },\n    secret: process.env.SESSION_SECRET,\n    resave: false,\n    saveUninitialized: true,\n  })\n);\napp.disable(\"etag\");\n\napp.get(\"/\", (_, res) => {\n  return responseFactory.responseOk(res);\n});\napp.get(\"/users\", (_, res) => {\n  return userController.readAll(res);\n});\napp.post(\"/login\", (req, res) => {\n  return authController.login(req.body, req, res);\n});\napp.get(\"/user/:userId\", isAuthenticated, (req, res) => {\n  const userId = req.params.userId;\n  return userController.readOneByUserId(userId, res);\n});\napp.get(\"/user/:userId/disbursement\", isAuthenticated, (req, res) => {\n  const userId = req.params.userId;\n  return disbursementController.readManyByUserId(userId, res);\n});\napp.get(\"/disbursements\", isAuthenticated, (_, res) => {\n  return disbursementResponseController.readAll(res);\n});\napp.post(\"/user/disbursement\", isAuthenticated, (req, res) => {\n  return disbursementController.createOne(req.body, req, res);\n});\napp.get(\"*\", function (_, res) {\n  responseFactory.responseNotFound(res);\n});\n\napp.listen(port, (err) => {\n  if (err) {\n    console.error(err);\n  }\n\n  console.log(`Serving on port ${port}`);\n});\n"],"file":"index.js"}